import t from"https://cdn.jsdelivr.net/npm/@finos/perspective@3.0.0/dist/cdn/perspective.js";async function e(t,n){const s=`https://gbfs.citibikenyc.com/gbfs/en/${t}.json`,{data:{stations:a},ttl:o}=await function(t){return new Promise((e=>{const n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="json",n.onload=()=>e(n.response),n.send(null)}))}(s);if("function"!=typeof n)return a;n(a),setTimeout((()=>e(t,n)),1e3*o)}const n=await t.worker();async function s(t){const e=t.slice(0,1);delete e[0].rental_methods,delete e[0].rental_uris,delete e[0].eightd_station_services;const s=await n.table(e),a=await s.schema();return await s.delete(),a}console.log("test"),async function(){const t=await Promise.all(["station_status","station_information"].map(e)),a=await async function(t){const e=await Promise.all(t.map(s));return Object.assign({},...e)}(t),o=await n.table(a,{index:"station_id"});for(let e of t)o.update(e);e("station_status",o.update),window.workspace.tables.set("citibike",Promise.resolve(o));const i=await async function(){const t=await fetch("layout.json");return await t.json()}();window.workspace.restore(i)}();