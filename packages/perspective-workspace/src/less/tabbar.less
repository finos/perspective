/******************************************************************************
 *
 * Copyright (c) 2018, the Perspective Authors.
 *
 * This file is part of the Perspective library, distributed under the terms of
 * the Apache License 2.0.  The full license can be found in the LICENSE file.
 *
 */

@import "~@finos/perspective-viewer/src/less/variables.less";

.p-TabBar-tabLabel {
    background-color: transparent;
    border: none;
    color: var(--workspace-secondary--color, #666);
    cursor: pointer;
}

.p-TabBar-tabLabel[value="[untitled]"] {
    color: #ddd !important;
}

.p-TabBar-tabLabel:focus {
    outline: none;
    color:  var(--workspace-secondary--color, #666) !important;
    cursor: text;
}

.p-TabBar-tab.p-mod-closable > .p-TabBar-tabCloseIcon:before {
    content: var(--close-button--content, "\2715");
    font-family: var(--settings--font-family, "Arial");
}

.p-TabBar-tab > .p-TabBar-tabConfigIcon:before {
    content: var(--open-settings-button--content, "\1F527");
    font-family: var(--settings--font-family, "Arial");
    transition: color 0.5s ease;
}

.p-TabBar-tab.p-mod-current.settings_open > .p-TabBar-tabConfigIcon:before {
    content: var(--close-settings-button--content, "\1F527");
    font-family: var(--settings--font-family, "Arial");
}

.p-TabBar-tab.p-mod-current.linked > .p-TabBar-tabConfigIcon:before {
    color: #22a0ce;
}

.p-TabBar-tab > .p-TabBar-tabConfigIcon {
    opacity: 0;
    pointer-events: none;
}

.p-TabBar-tab.p-mod-current > .p-TabBar-tabConfigIcon {
    opacity: 1;
    pointer-events: all;
}

.p-mod-current {
    .p-TabBar-tabConfigIcon,
    .p-TabBar-tabCloseIcon {
        color: #ccc;
        transition: color 0.2s ease-out;
    }
    .p-TabBar-tabConfigIcon:hover,
    .p-TabBar-tabCloseIcon:hover {
        color: #1a7da1;
        transition: color 0.2s ease-out;
    }
}

.p-BoxPanel {
    overflow: scroll !important;
}

.p-TabBar,
.p-TabBar-tab {
    position: relative;

    overflow: visible !important;
}

.p-TabBar-tabLabel:empty::after {
    content: "[untitled]";
    color: #aaa;
}

.p-mod-current .p-TabBar-tabLabel:empty::after {
    color: #ddd;
}

.p-TabBar-tabLabel:empty::after {
    content: "[untitled]";
}

.divider {
    left: 14px;
    bottom: 0;
    position: absolute;
    right: 14px;
    display: none;
    transition: background-color 0.2s ease-out, width 0.2s ease-out;

    height: 1px;
    background-color: var(--workspace-tabbar--border-color, #eaeaea);
    margin-bottom: 0px;
}

.p-TabBar-tab.p-mod-hidden {
    display: flex !important;
    opacity: 0.5;
}

.p-TabBar-tab.p-mod-hidden .divider {
    display: none;
}

.p-TabBar-tab.p-mod-current .divider {
    display: block;
}

.p-TabBar-tabLabel input {
    height: 18px;
}

.p-TabBar {
    min-height: 24px !important;
}

@border-color: 1px solid #eaeaea;
@night-border-color: 1px solid #ddd;

.pfm-button-base {
    background: white !important;
}

.pfm-button-base:active {
    background: #016bc6 !important;
}

.p-TabBar-content {
    padding: 0px;
    overflow: hidden;
    margin: 0px -4px -1px -4px;
    border-bottom: 0px solid #fff !important;
    border-left: #eaeaea;
    border-right: #eaeaea;
}

.p-TabBar-tab.p-mod-current {
    .shadow {
        margin: -1px;
        position: absolute;
        width: calc(~"100% + 2px");
        height: 200%;
        pointer-events: none;
        left: 0px;
    }

    &.settings_open .shadow {
        box-shadow: none;
    }
}

.p-TabBar-tab {
    margin: 0px 4px;
    border-color: #eaeaea;
}

.p-TabBar-content > .p-TabBar-tab,
.p-TabBar-content > .p-TabBar-tab.p-mod-current.settings_open {
    background-color: #F2F4F6;
}

.p-TabBar-content.inactive-blur > .p-TabBar-tab {
    background-color:var(--workspace-inactive-blur--background-color, rgba(0,0,0,0.05));
}

.condensed .p-TabBar-content {
    & > .p-TabBar-tab .p-TabBar-tabConfigIcon {
        display: none;
    }

    & > .p-TabBar-tab.p-mod-current .p-TabBar-tabConfigIcon {
        display: block;
    }

    & > .p-TabBar-tab.p-mod-current.settings_open {
        .p-TabBar-tabLabel {
            margin-left: 0px;
        }
    }
}

.p-TabBar-content > .p-TabBar-tab.p-mod-current.settings_open {
    border-width: 1px !important;
    border-color: transparent;
    .p-TabBar-tabToolbar {
        display: flex;
    }
    .divider {
        height: 1px;
        margin-bottom: 0px;
        left: 10px;
        right: 10px;
    }
    &:last-child:first-child .divider {
        background: none;
        transition: none;
    }
}

.p-TabBar-content > .p-TabBar-tab.p-mod-current.perspective_updating {
    .p-TabBar-tabConfigIcon {
        display: none;
    }

    .p-TabBar-tabLoadingIcon {
        display: block;
    }
}

.p-TabBar-content > .p-TabBar-tab.p-mod-current.settings_open {
    background-color: transparent !important;
}

.p-TabBar-content > .p-TabBar-tab {
    max-width: 100000px !important;
    flex: 0 1 100000px !important;
    background: none;
    color: #737373;
    padding-top: 1px !important;
    border-style: solid;
    border-width: 1px;
    border-color: transparent;
    height: 24px !important;
    max-height: 24px !important;
    transform: none !important;
    transition: color 0.2s ease-out;
}

.p-TabBar-content > .p-TabBar-tab {
    color: #ccc;
}

.p-TabBar-content > .p-TabBar-tab {
    color: #ccc;
}

.p-TabBar-content > .p-TabBar-tab .p-TabBar-tabLabel {
    color:  var(--workspace-secondary--color, #666);
}

.p-TabBar-content > .p-TabBar-tab:hover {
    color: #ccc;
}

.p-TabBar-content > .p-TabBar-tab.p-mod-current {
    color:  var(--workspace-secondary--color, #666);
}

.p-TabBar-tab.p-mod-current .p-TabBar-tabLabel {
    white-space: nowrap !important;
}

.p-TabBar-tabLabel {
    font-family: "Open Sans";
    font-weight: 400;
    font-size: 12px;
    line-height: 22px;
    text-align: center;
    white-space: normal !important;
    word-break: break-all;
}

.p-TabBar-tabCloseIcon,
.p-TabBar-tabConfigIcon {
    cursor: pointer !important;
    line-height: 22px !important;
    padding-right: 8px !important;
}

.p-TabBar-tabConfigIcon {
    padding-left: 8px;
}

.p-TabBar-tabLoadingIcon {
    padding-left: 11px;
    padding-right: 12px;
}

.bottom .p-TabBar-tab {
    flex-basis: 10000px !important;
    max-width: 10000px !important;
}

.p-TabBar-content > .p-TabBar-tab.p-mod-current {
    color: var(--workspace-tabbar--color, #666) !important;
    border: var(--workspace-tabbar--border, @border-color);
    background-color: var(--workspace-tabbar--background-color, white);
    height: 26px !important;
    max-height: 26px !important;
}

.bottom .p-TabBar-tab.p-mod-current {
    border: none;
}

::-webkit-scrollbar-thumb {
    background-color: #ccc;
}

.perspective-workspace.context-menu * .p-TabBar.context-focus {
    opacity: 1;
}

.perspective-workspace.context-menu * .p-TabBar {
    opacity: 0.2;
}

.perspective-workspace .p-TabBar {
    transition: opacity 0.2s ease-out;
}

