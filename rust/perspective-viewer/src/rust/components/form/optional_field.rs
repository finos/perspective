// ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
// ┃ ██████ ██████ ██████       █      █      █      █      █ █▄  ▀███ █       ┃
// ┃ ▄▄▄▄▄█ █▄▄▄▄▄ ▄▄▄▄▄█  ▀▀▀▀▀█▀▀▀▀▀ █ ▀▀▀▀▀█ ████████▌▐███ ███▄  ▀█ █ ▀▀▀▀▀ ┃
// ┃ █▀▀▀▀▀ █▀▀▀▀▀ █▀██▀▀ ▄▄▄▄▄ █ ▄▄▄▄▄█ ▄▄▄▄▄█ ████████▌▐███ █████▄   █ ▄▄▄▄▄ ┃
// ┃ █      ██████ █  ▀█▄       █ ██████      █      ███▌▐███ ███████▄ █       ┃
// ┣━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┫
// ┃ Copyright (c) 2017, the Perspective Authors.                              ┃
// ┃ ╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌╌ ┃
// ┃ This file is part of the Perspective library, distributed under the terms ┃
// ┃ of the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0). ┃
// ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

use web_sys::Event;
use yew::{function_component, html, Callback, Children, Html, Properties};

#[derive(Properties, PartialEq)]
pub struct OptionalFieldProps {
    pub label: String,
    pub on_check: Callback<Event>,
    pub checked: bool,
    pub children: Children,
    #[prop_or(String::from("section row"))]
    pub class: String,

    #[prop_or_default]
    pub disabled: bool,
}

#[function_component(OptionalField)]
pub fn optional_field(props: &OptionalFieldProps) -> Html {
    html! {
        <fieldset
            style="border: none; padding-left: 0px; padding-right: 0px;"
            disabled={props.disabled}
        >
            <legend style="font-size: 9px">{ props.label.clone() }</legend>
            <div class={props.class.clone()}>
                <input
                    type="checkbox"
                    // this isn't necessary to disable the field but is necessary for the style
                    disabled={props.disabled}
                    onchange={props.on_check.clone()}
                    checked={props.checked}
                    id={format!("{}-checkbox", props.label.replace(' ', "-"))}
                />
                { props.children.clone() }
            </div>
        </fieldset>
    }
}
